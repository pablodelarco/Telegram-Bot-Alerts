import os import telebot from telebot import types # Reemplace con la palabra que desea rastrear API_KEY = os.environ.get('API_KEY') bot = telebot.TeleBot(API_KEY) # Cree una variable global para almacenar la palabra para buscar word_to_track = "" group_id = "" # Manejar el comando "/start" @bot.message_handler(commands=['start']) def start(message): bot.send_message(message.chat.id, "Hola, soy un Bot de Telegram que puede buscar una palabra específica en los mensajes de un grupo.") bot.send_message(message.chat.id, "¿Qué palabra quieres que busque?") # Usa la función force_reply para obtener la palabra a buscar para bot.register_next_step_handler(mensaje, get_word_to_search) def get_word_to_search(mensaje):palabra_a_buscar global palabra_a_buscar = mensaje.texto bot.send_message(mensaje.chat.id, "Vale, buscaré la palabra '" + palabra_a_buscar + "' en los mensajes del grupo") bot.send_message(mensaje.chat.id, "¿Cuál es el ID del grupo en el que quieres que busque?") bot.register_next_step_handler(mensaje, get_group_id) def get_group_id(mensaje): group_id = mensaje.text bot.send_message(mensaje.chat.id, "Vale, yo comenzará a buscar la palabra '" + word_to_search + "' en el grupo con ID '" + group_id + "'.") # Reemplace con el chat_id del grupo que desea rastrear # Función que se llamará cuando se envíe un mensaje recibido @bot.message_handler(content_types=['text'], func=mensaje lambda: mensaje.chat.id == group_id) def check_message(mensaje): if word_to_track in message.text: bot.send_message(chat_id='your_chat_id', text='La palabra "' + word_to_track + '" ha aparecido en el grupo ' + mensaje.chat .título) bot.sondeo()